<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>GravityBall: C:/Users/Kat/Documents/PROJECTS/ICT290/2015shayLearyALL/CAMPUS_TOUR/collision.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>C:/Users/Kat/Documents/PROJECTS/ICT290/2015shayLearyALL/CAMPUS_TOUR/collision.cpp</h1><a href="collision_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//  collision.cpp</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">//  Implementation file for Collsion Class</span>
<a name="l00004"></a>00004 <span class="comment">//  Defines all the methods declared, but not defined, in collsion.h</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">//  Shay Leary, March 2005</span>
<a name="l00007"></a>00007 <span class="comment">//--------------------------------------------------------------------------------------</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="collision_8h.html">collision.h</a>"</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="comment">//--------------------------------------------------------------------------------------</span>
<a name="l00012"></a>00012 <span class="comment">//  Creates a linked list for each quadrant and then copies the bounding box data from</span>
<a name="l00013"></a>00013 <span class="comment">//  AABB (array) to the required linked list.</span>
<a name="l00014"></a>00014 <span class="comment">//  I initially just created AABB, then decided to place the bounding box info into a list.</span>
<a name="l00015"></a>00015 <span class="comment">//  I kept the array has it allows for the data to be copied into the list in any reuired </span>
<a name="l00016"></a>00016 <span class="comment">//  order.</span>
<a name="l00017"></a>00017 <span class="comment">//--------------------------------------------------------------------------------------</span>
<a name="l00018"></a><a class="code" href="class_collision.html#30554164f1f1501dc707bcec81e3fd34">00018</a> <span class="keywordtype">void</span> <a class="code" href="class_collision.html#30554164f1f1501dc707bcec81e3fd34">Collision::CreateLinkedList</a>()
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 {
<a name="l00021"></a>00021         <span class="keywordtype">int</span> tempNoBoxes = <a class="code" href="class_collision.html#ffd6aa970fc603b44dab681f551baef1">GetNoBoundingBoxes</a>();
<a name="l00022"></a>00022         <span class="comment">// initilize list size for each quadrant</span>
<a name="l00023"></a>00023         <a class="code" href="class_collision.html#672db5b63f40954a5c7ddc2077dcd0dd">m_listSize</a>[0] = 0;
<a name="l00024"></a>00024         <a class="code" href="class_collision.html#672db5b63f40954a5c7ddc2077dcd0dd">m_listSize</a>[1] = 0;
<a name="l00025"></a>00025         <a class="code" href="class_collision.html#672db5b63f40954a5c7ddc2077dcd0dd">m_listSize</a>[2] = 0;
<a name="l00026"></a>00026         <a class="code" href="class_collision.html#672db5b63f40954a5c7ddc2077dcd0dd">m_listSize</a>[3] = 0;
<a name="l00027"></a>00027 
<a name="l00028"></a>00028         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> count = 0; count &lt; tempNoBoxes; count++)
<a name="l00029"></a>00029         {
<a name="l00030"></a>00030                 GLdouble maxX = <a class="code" href="class_collision.html#54a4c7409f13ac040768d41422e796de">GetAABBMaxX</a>(count);
<a name="l00031"></a>00031                 GLdouble minX = <a class="code" href="class_collision.html#5cf3d3f10e3f24128a6b410c5a34ffa7">GetAABBMinX</a>(count);
<a name="l00032"></a>00032                 GLdouble maxY = <a class="code" href="class_collision.html#a3dcbca1a59ada6f1140ce68ffaf4e24">GetAABBMaxY</a>(count);
<a name="l00033"></a>00033                 GLdouble minY = <a class="code" href="class_collision.html#3e246319658fd5a998798ca6b31d3928">GetAABBMinY</a>(count);
<a name="l00034"></a>00034                 GLdouble maxZ = <a class="code" href="class_collision.html#cc43c167003e4a0b9acbd3cd115bb63e">GetAABBMaxZ</a>(count);
<a name="l00035"></a>00035                 GLdouble minZ = <a class="code" href="class_collision.html#30a4c5b51585ee4ea10d6b7a7a7b2539">GetAABBMinZ</a>(count);
<a name="l00036"></a>00036                 <span class="comment">// 1st quadrant</span>
<a name="l00037"></a>00037                 <span class="keywordflow">if</span> (((minX &lt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0) || (maxX &lt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0)) &amp;&amp; 
<a name="l00038"></a>00038                         ((minZ &lt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0) || (maxZ &lt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0)))
<a name="l00039"></a>00039                 {
<a name="l00040"></a>00040                         <span class="comment">// increment list size</span>
<a name="l00041"></a>00041                         <a class="code" href="class_collision.html#672db5b63f40954a5c7ddc2077dcd0dd">m_listSize</a>[0]++;
<a name="l00042"></a>00042                         <span class="comment">// add bb data to list</span>
<a name="l00043"></a>00043                         <a class="code" href="class_collision.html#da3810edb7dd64df4afc1d30097385ca">m_list</a>[0].<a class="code" href="class_a_a_b_b_linked_list.html#0dda8d1e7b9d5a2721b518d03b141664">AddToStart</a>(maxX, minX, maxY, minY, maxZ, minZ);
<a name="l00044"></a>00044                 }
<a name="l00045"></a>00045                 <span class="comment">// 2nd quadrant</span>
<a name="l00046"></a>00046                 <span class="keywordflow">if</span> (((minX &lt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0) || (maxX &lt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0)) &amp;&amp;
<a name="l00047"></a>00047                         ((minZ &gt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0) || (maxZ &gt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0)))
<a name="l00048"></a>00048                 {
<a name="l00049"></a>00049                         <span class="comment">// increment list size</span>
<a name="l00050"></a>00050                         <a class="code" href="class_collision.html#672db5b63f40954a5c7ddc2077dcd0dd">m_listSize</a>[1]++;
<a name="l00051"></a>00051                         <span class="comment">// add bb data to list</span>
<a name="l00052"></a>00052                         <a class="code" href="class_collision.html#da3810edb7dd64df4afc1d30097385ca">m_list</a>[1].<a class="code" href="class_a_a_b_b_linked_list.html#0dda8d1e7b9d5a2721b518d03b141664">AddToStart</a>(maxX, minX, maxY, minY, maxZ, minZ);
<a name="l00053"></a>00053                 }
<a name="l00054"></a>00054                 <span class="comment">// 3rd quadrant</span>
<a name="l00055"></a>00055                 <span class="keywordflow">if</span> (((minX &gt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0) || (maxX &gt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0)) &amp;&amp; 
<a name="l00056"></a>00056                         ((minZ &lt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0) || (maxZ &lt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0)))
<a name="l00057"></a>00057                 {
<a name="l00058"></a>00058                         <span class="comment">// increment list size</span>
<a name="l00059"></a>00059                         <a class="code" href="class_collision.html#672db5b63f40954a5c7ddc2077dcd0dd">m_listSize</a>[2]++;
<a name="l00060"></a>00060                         <span class="comment">// add bb data to list</span>
<a name="l00061"></a>00061                         <a class="code" href="class_collision.html#da3810edb7dd64df4afc1d30097385ca">m_list</a>[2].<a class="code" href="class_a_a_b_b_linked_list.html#0dda8d1e7b9d5a2721b518d03b141664">AddToStart</a>(maxX, minX, maxY, minY, maxZ, minZ);
<a name="l00062"></a>00062                 }
<a name="l00063"></a>00063                 <span class="comment">// 4th quadrant</span>
<a name="l00064"></a>00064                 <span class="keywordflow">if</span> (((minX &gt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0) || (maxX &gt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0)) &amp;&amp; 
<a name="l00065"></a>00065                         ((minZ &gt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0) || (maxZ &gt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0)))
<a name="l00066"></a>00066                 {
<a name="l00067"></a>00067                         <span class="comment">// increment list size</span>
<a name="l00068"></a>00068                         <a class="code" href="class_collision.html#672db5b63f40954a5c7ddc2077dcd0dd">m_listSize</a>[3]++;
<a name="l00069"></a>00069                         <span class="comment">// add bb data to list</span>
<a name="l00070"></a>00070                         <a class="code" href="class_collision.html#da3810edb7dd64df4afc1d30097385ca">m_list</a>[3].<a class="code" href="class_a_a_b_b_linked_list.html#0dda8d1e7b9d5a2721b518d03b141664">AddToStart</a>(maxX, minX, maxY, minY, maxZ, minZ);
<a name="l00071"></a>00071                 }
<a name="l00072"></a>00072         }
<a name="l00073"></a>00073         <span class="comment">// Call AABB constructor the delete array and clear memory</span>
<a name="l00074"></a>00074         <span class="comment">// (the array AABB is not required once the lists have been created)</span>
<a name="l00075"></a>00075         <a class="code" href="class_collision.html#88ee51f46c755e9fde0eaeea3ccc841c">m_AABB</a>.<a class="code" href="class_a_a_b_b.html#1c8a263cbd356446535e88b521eab3d5">~AABB</a>();
<a name="l00076"></a>00076 }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="comment">//--------------------------------------------------------------------------------------</span>
<a name="l00079"></a>00079 <span class="comment">//  Returns TRUE if a collsion occurs.</span>
<a name="l00080"></a>00080 <span class="comment">//  The parameters passed to this function are the co-ordinates of the camera.</span>
<a name="l00081"></a>00081 <span class="comment">//  At present this function uses if statements to split the world into quadrants</span>
<a name="l00082"></a>00082 <span class="comment">//  this is to be improved (for the project) so that the quadrants (or levels) are</span>
<a name="l00083"></a>00083 <span class="comment">//  stored in a list or tree data structure.</span>
<a name="l00084"></a>00084 <span class="comment">//--------------------------------------------------------------------------------------</span>
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keywordtype">bool</span> <a class="code" href="class_collision.html#0b97a69bc20aeecc04e5c4359e675af7">Collision::Collide</a>(GLdouble endX, GLdouble endY, GLdouble endZ)
<a name="l00087"></a>00087 {
<a name="l00088"></a>00088         <span class="keywordtype">bool</span> <a class="code" href="class_collision.html">Collision</a> = <span class="keyword">false</span>;
<a name="l00089"></a>00089         <span class="comment">// check 1st quadrant (1st linked list)</span>
<a name="l00090"></a>00090         <span class="keywordflow">if</span> (((endX &lt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0) || (endX &lt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0)) &amp;&amp; 
<a name="l00091"></a>00091                 ((endZ &lt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0) || (endZ &lt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0)))
<a name="l00092"></a>00092         {
<a name="l00093"></a>00093                 Collision = <a class="code" href="class_collision.html#a2f957eb7ad08fb81e993e6a55c2d5c0">CheckCollision</a>(0, endX, endY, endZ);
<a name="l00094"></a>00094         }
<a name="l00095"></a>00095         <span class="comment">// check 2nd quadrant (2nd linked list)</span>
<a name="l00096"></a>00096         <span class="keywordflow">if</span> (((endX &lt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0) || (endX &lt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0)) &amp;&amp; 
<a name="l00097"></a>00097                 ((endZ &gt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0) || (endZ &gt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0)))
<a name="l00098"></a>00098         {
<a name="l00099"></a>00099                 Collision = <a class="code" href="class_collision.html#a2f957eb7ad08fb81e993e6a55c2d5c0">CheckCollision</a>(1, endX, endY, endZ);
<a name="l00100"></a>00100         }
<a name="l00101"></a>00101         <span class="comment">// check 3rd quadrant (3rd linked list)</span>
<a name="l00102"></a>00102         <span class="keywordflow">if</span> (((endX &gt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0) || (endX &gt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0)) &amp;&amp; 
<a name="l00103"></a>00103         ((endZ &lt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0) || (endZ &lt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0)))
<a name="l00104"></a>00104         {
<a name="l00105"></a>00105                 Collision = <a class="code" href="class_collision.html#a2f957eb7ad08fb81e993e6a55c2d5c0">CheckCollision</a>(2, endX, endY, endZ);
<a name="l00106"></a>00106         }
<a name="l00107"></a>00107         <span class="comment">// check 4th quadrant (4th linked list)</span>
<a name="l00108"></a>00108         <span class="keywordflow">if</span> (((endX &gt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0) || (endX &gt;= <a class="code" href="class_collision.html#623ab40059b558aee3a4d7ec9f36e584">m_worldSizeX</a> / 2.0)) &amp;&amp; 
<a name="l00109"></a>00109         ((endZ &gt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0) || (endZ &gt;= <a class="code" href="class_collision.html#1a38403384262f9817e46e125e77601b">m_worldSizeZ</a> / 2.0)))
<a name="l00110"></a>00110         {
<a name="l00111"></a>00111                 Collision = <a class="code" href="class_collision.html#a2f957eb7ad08fb81e993e6a55c2d5c0">CheckCollision</a>(3, endX, endY, endZ);
<a name="l00112"></a>00112         }
<a name="l00113"></a>00113         <span class="keywordflow">return</span> Collision;
<a name="l00114"></a>00114 }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 <span class="comment">//--------------------------------------------------------------------------------------</span>
<a name="l00117"></a>00117 <span class="comment">// Called from above function to check if collsion occurred.</span>
<a name="l00118"></a>00118 <span class="comment">//--------------------------------------------------------------------------------------</span>
<a name="l00119"></a>00119 <span class="keywordtype">bool</span> <a class="code" href="class_collision.html#a2f957eb7ad08fb81e993e6a55c2d5c0">Collision::CheckCollision</a>(<span class="keywordtype">int</span> index, GLdouble endX, GLdouble endY, GLdouble endZ)
<a name="l00120"></a>00120 {
<a name="l00121"></a>00121         <span class="keywordtype">bool</span> CollisionFound = <span class="keyword">false</span>;
<a name="l00122"></a>00122         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> count = 0; count &lt; <a class="code" href="class_collision.html#672db5b63f40954a5c7ddc2077dcd0dd">m_listSize</a>[index]; count++)
<a name="l00123"></a>00123         {
<a name="l00124"></a>00124                 <span class="keywordflow">if</span> (((endX &lt; <a class="code" href="class_collision.html#da3810edb7dd64df4afc1d30097385ca">m_list</a>[index].GetMaxX(count)) &amp;&amp; (endX &gt; <a class="code" href="class_collision.html#da3810edb7dd64df4afc1d30097385ca">m_list</a>[index].GetMinX(count))) &amp;&amp;
<a name="l00125"></a>00125                         ((endZ &lt; <a class="code" href="class_collision.html#da3810edb7dd64df4afc1d30097385ca">m_list</a>[index].GetMaxZ(count)) &amp;&amp; (endZ &gt; <a class="code" href="class_collision.html#da3810edb7dd64df4afc1d30097385ca">m_list</a>[index].GetMinZ(count))))
<a name="l00126"></a>00126                 {
<a name="l00127"></a>00127                         CollisionFound = <span class="keyword">true</span>;
<a name="l00128"></a>00128                 }
<a name="l00129"></a>00129         }
<a name="l00130"></a>00130         <span class="keywordflow">return</span> CollisionFound;
<a name="l00131"></a>00131 }
<a name="l00132"></a>00132 <span class="comment">//--------------------------------------------------------------------------------------</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Nov 3 20:43:33 2016 for GravityBall by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
